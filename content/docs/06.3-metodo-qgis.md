---
title: "6.3. Op√ß√£o 3: QGIS Desenho Manual"
weight: 63
bookToc: true
---

## **6.4.3 OP√á√ÉO 3: QGIS Desenho Manual (geometrias precisas)** üåü RECOMENDADO ARTESP

Use esta op√ß√£o quando voc√™ precisa desenhar geometrias **precisas** que seguem o tra√ßado da rodovia, ou quando precisa criar Polygons/LineStrings complexos.

**Quando usar:**
- ‚úÖ Precisa de LineString que segue o tra√ßado da rodovia
- ‚úÖ Precisa desenhar Polygons (√°reas de interven√ß√£o, SAU, estacionamentos)
- ‚úÖ Quer geometrias com precis√£o visual sobre mapa base
- ‚úÖ Tem tempo para desenhar manualmente cada geometria

**‚ö†Ô∏è Nota:** Este m√©todo √© mais demorado, mas produz geometrias mais precisas que MULTIPOINT ou LineStrings simples.

---

## **Passo A: Preparar Pontos de Refer√™ncia**

1. **Adicione colunas de refer√™ncia** (opcional, mas recomendado):
   - `lat_ref`, `lon_ref` - Coordenada aproximada para cada servi√ßo
   - Pode ser o ponto m√©dio do trecho, ou coordenada de km_inicial
   - Servir√° apenas para localizar o servi√ßo no mapa

2. **Exporte para CSV:**
   - Arquivo ‚Üí Salvar Como ‚Üí CSV UTF-8
   - Nome: `dados_referencia.csv`

---

## **Passo B: Importar Pontos de Refer√™ncia no QGIS**

1. **Abra o QGIS**

2. **Adicione os pontos de refer√™ncia:**
   - Menu: Camada ‚Üí Adicionar Camada ‚Üí **Adicionar Camada de Texto Delimitado**
   - Selecione `dados_referencia.csv`
   - Configure:
     - **Geometria**: Coordenadas de ponto
     - **Campo X**: `lon_ref`
     - **Campo Y**: `lat_ref`
     - **CRS**: EPSG:4674
   - Clique em "Adicionar"

3. **Os pontos aparecer√£o no mapa** para refer√™ncia visual

---

## **Passo C: Adicionar Mapa Base**

Para desenhar geometrias precisas, voc√™ precisa de um mapa base (sat√©lite ou ruas).

### **Op√ß√£o 1: Plugin QuickMapServices (Recomendado)**

1. **Instale o plugin:**
   - Menu: Plugins ‚Üí Gerenciar e Instalar Plugins
   - Busque: "QuickMapServices"
   - Clique em "Instalar Plugin"

2. **Adicione mapa base:**
   - Menu: Web ‚Üí QuickMapServices ‚Üí OSM ‚Üí **OSM Standard**
   - Ou: **Google Satellite** (se dispon√≠vel ap√≥s configurar "Get contributed pack")

### **Op√ß√£o 2: XYZ Tiles**

1. **Adicione camada XYZ:**
   - Painel Navegador ‚Üí XYZ Tiles ‚Üí clique direito ‚Üí New Connection
   - Nome: `Google Satellite`
   - URL: `https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}`
   - Clique OK

2. **Adicione ao mapa:**
   - Duplo clique em "Google Satellite" no painel Navegador

---

### **Passo C.3: Camadas de Refer√™ncia Geoespacial (Opcional)**

A ARTESP disponibiliza no Portal de Dados Abertos diversas camadas vetoriais de refer√™ncia do Estado de S√£o Paulo que podem auxiliar na digitaliza√ß√£o de geometrias.

**üì• Download:** [Portal de Dados Abertos ARTESP - Programa√ß√£o de Obras](https://dadosabertos.artesp.sp.gov.br/dataset/programacao-de-obras)

**‚ö†Ô∏è IMPORTANTE - Limita√ß√µes e Responsabilidades:**

As camadas de refer√™ncia disponibilizadas podem apresentar:
- **Imprecis√£o posicional** - as geometrias podem n√£o corresponder exatamente √† realidade de campo
- **Incompletude** - alguns trechos, elementos ou atributos podem estar ausentes ou incompletos
- **Desatualiza√ß√£o temporal** - os dados refletem o estado da base de dados no momento da extra√ß√£o
- **Inconsist√™ncias cadastrais** - diferen√ßas entre bases de dados de diferentes fontes

**√â de responsabilidade exclusiva do usu√°rio verificar, validar e corrigir** as informa√ß√µes antes de utiliz√°-las em produtos, estudos ou documentos oficiais. Recomenda-se sempre conferir com imagens de sat√©lite atualizadas, bases cartogr√°ficas oficiais (IBGE, IGC-SP) e/ou levantamentos de campo quando necess√°rio.

**As camadas servem exclusivamente como refer√™ncia auxiliar para orienta√ß√£o durante a digitaliza√ß√£o e n√£o substituem levantamentos t√©cnicos ou bases cadastrais oficiais.**

---

**Vantagens de usar camadas de refer√™ncia:**
- ‚úÖ Refer√™ncia vetorial (facilita visualiza√ß√£o de tra√ßados e limites)
- ‚úÖ Permite uso de snapping (ajuste magn√©tico) ao desenhar geometrias
- ‚úÖ Cont√©m atributos descritivos que auxiliam na identifica√ß√£o
- ‚úÖ Dispon√≠vel em diferentes sistemas de coordenadas

**Tipos de camadas dispon√≠veis:**

| Tipo de Camada | CRS Dispon√≠veis | Quando Usar |
|----------------|-----------------|-------------|
| Malha Rodovi√°ria | SIRGAS 2000 (EPSG:4674), UTM 22S (EPSG:31982), UTM 23S (EPSG:31983), UTM combinado (EPSG:5880) | **RECOMENDADO** - Refer√™ncia para digitaliza√ß√£o de servi√ßos lineares e pontuais |
| Marcos Quilom√©tricos | SIRGAS 2000 (EPSG:4674) | Refer√™ncia para localiza√ß√£o por quilometragem |
| Limites Administrativos | SIRGAS 2000 (EPSG:4674) | Contextualiza√ß√£o espacial (munic√≠pios, estado) |

üí° **Recomenda√ß√£o de CRS:** Para compatibilidade com o schema GeoJSON exigido, utilize camadas em **EPSG:4674 (SIRGAS 2000 geogr√°fico)**.

**Como adicionar:**

1. **Fa√ßa download das camadas:**
   - Acesse: [Portal de Dados Abertos ARTESP - Programa√ß√£o de Obras](https://dadosabertos.artesp.sp.gov.br/dataset/programacao-de-obras)
   - Escolha as camadas adequadas ao seu projeto
   - **Formatos dispon√≠veis:** GeoPackage (.gpkg) e/ou GeoJSON (.geojson)

2. **(Opcional, mas Recomendado) Converter GeoJSON para GeoPackage:**

   Se baixar arquivos em formato GeoJSON, **GeoPackage √© muito mais eficiente para trabalhar no QGIS** (5-10x mais r√°pido em renderiza√ß√£o e opera√ß√µes espaciais).

   **Op√ß√£o A - Interface QGIS:**
   - Arraste o arquivo `.geojson` para o mapa do QGIS
   - Clique direito na camada ‚Üí **Exportar** ‚Üí **Salvar Fei√ß√µes Como...**
   - Configure:
     - **Formato**: GeoPackage
     - **Nome do arquivo**: escolha um nome descritivo com extens√£o `.gpkg`
     - **SRC**: Manter o original (n√£o alterar o sistema de coordenadas)
     - **√çndice espacial**: ‚úÖ Marcar esta op√ß√£o (importante para performance!)
   - Clique **OK**
   - Remova a camada GeoJSON e adicione a GeoPackage criada

   **Op√ß√£o B - Linha de Comando (ogr2ogr):**
   ```bash
   ogr2ogr -f GPKG -lco SPATIAL_INDEX=YES \
       arquivo_saida.gpkg \
       arquivo_entrada.geojson
   ```

   üí° **Benef√≠cio:** Zoom e pan muito mais suaves, especialmente para camadas com muitas features. O √≠ndice espacial acelera opera√ß√µes de sele√ß√£o, snapping e an√°lises espaciais.

3. **Adicione no QGIS:**
   - Menu: Camada ‚Üí Adicionar Camada ‚Üí **Adicionar Camada Vetorial**
   - Selecione o arquivo baixado (`.geojson` ou `.gpkg` se voc√™ converteu)
   - Clique em "Adicionar"

4. **Configure a simbologia (opcional):**
   - Clique direito na camada ‚Üí Propriedades ‚Üí Simbologia
   - Escolha estilos (cor, espessura, transpar√™ncia) que facilitem a visualiza√ß√£o sobre o mapa base

5. **Use para refer√™ncia e snapping:**
   - As camadas aparecer√£o como features vetoriais sobre o mapa
   - Voc√™ pode ativar o snapping (Projeto ‚Üí Op√ß√µes de Snapping) para que seus desenhos "colem" nas geometrias de refer√™ncia
   - Use como guia visual ao desenhar Points, LineStrings e Polygons

üí° **Dica:** Sempre **confira visualmente** com imagens de sat√©lite recentes para garantir a acur√°cia posicional do seu trabalho, independentemente da camada de refer√™ncia utilizada.

üìò **Para especifica√ß√µes t√©cnicas detalhadas sobre as camadas dispon√≠veis**, consulte [Anexo 14.2 - Camadas de Refer√™ncia Geoespacial]({{< relref "14-anexos#142-camadas-de-refer√™ncia-geoespacial" >}}).

---

## **Passo D: Criar Camada de Geometrias**

1. **Crie nova camada:**
   - Menu: Camada ‚Üí Criar Camada ‚Üí **Nova Camada GeoPackage** (ou Shapefile)
   - Configure:
     - **Nome do banco de dados**: `conservacao_2026.gpkg` (escolha local para salvar)
     - **Nome da tabela**: `servicos`
     - **Tipo de geometria**: Escolha conforme necessidade:
       - **Point**: servi√ßos pontuais
       - **LineString**: servi√ßos lineares (pavimento, sinaliza√ß√£o, etc.)
       - **Polygon**: √°reas (SAU, estacionamento, √°reas de interven√ß√£o)
       - **MultiPoint**: m√∫ltiplos pontos discretos
     - **CRS**: EPSG:4674 - SIRGAS 2000

---

**‚ö†Ô∏è IMPORTANTE - Servi√ßos com Diferentes Tipos de Geometria**

Se seus servi√ßos incluem **DIFERENTES tipos de geometria** (exemplo: Point para equipamentos + LineString para pavimenta√ß√£o + Polygon para √°reas), voc√™ precisar√°:

1. **Criar M√öLTIPLAS camadas** no QGIS (uma para cada tipo de geometria)
   - Cada camada GeoPackage/Shapefile suporta apenas UM tipo de geometria
   - Exemplo: `servicos_points.gpkg`, `servicos_lines.gpkg`, `servicos_polygons.gpkg`

2. **Exportar M√öLTIPLOS arquivos GeoJSON** (um por camada)
   - Cada exporta√ß√£o gerar√° um arquivo separado

3. **Combinar os arquivos** em um √∫nico GeoJSON posteriormente
   - O schema exige UM √öNICO arquivo final com TODAS as features
   - Use o script `mesclar_geojson.py` fornecido

üìò **Para instru√ß√µes completas sobre mesclagem**, consulte [Se√ß√£o 6.5.A - M√∫ltiplas Camadas]({{< relref "06.5-exportar-validar#a-tratamento-de-m√∫ltiplas-camadas-com-geometrias-diferentes" >}}).

üí° **Dica:** Organize os nomes das camadas com sufixos claros (_points, _lines, _polygons) para facilitar a identifica√ß√£o durante a exporta√ß√£o.

---

2. **Adicione campos de atributos:**
   - Clique em "Novos campos" e adicione os campos do schema:
     - `id` (Texto, tamanho 50)
     - `lote` (Texto, tamanho 10)
     - `rodovia` (Texto, tamanho 20)
     - `item` (Texto, tamanho 10)
     - `detalhamento_servico` (Texto, tamanho 255)
     - `unidade` (Texto, tamanho 10)
     - `quantidade` (N√∫mero decimal)
     - `km_inicial` (N√∫mero decimal)
     - `km_final` (N√∫mero decimal)
     - `data_inicial` (Data)
     - `data_final` (Data)
     - `observacoes_gerais` (Texto, tamanho 255)
   - Clique OK

---

## **Passo E: Desenhar Geometrias**

1. **Ative o modo de edi√ß√£o:**
   - Selecione a camada criada
   - Clique no √≠cone do l√°pis (ou F9) para **Alternar Edi√ß√£o**

2. **Ferramentas de desenho:**

   ### **Para POINT:**
   - Clique no √≠cone "Adicionar Fei√ß√£o de Ponto"
   - Clique no local do servi√ßo no mapa
   - Preencha os atributos na janela que aparece
   - Clique OK

   ### **Para LineString:**
   - Clique no √≠cone "Adicionar Fei√ß√£o de Linha"
   - Clique sucessivamente ao longo da rodovia para criar v√©rtices
   - **Siga o tra√ßado da rodovia** usando o mapa base como guia
   - Clique direito para finalizar a linha
   - Preencha os atributos
   - Clique OK

   ### **Para Polygon:**
   - Clique no √≠cone "Adicionar Fei√ß√£o de Pol√≠gono"
   - Clique nos v√©rtices ao redor da √°rea
   - Feche o pol√≠gono clicando direito
   - Preencha os atributos
   - Clique OK

3. **Dicas de digitaliza√ß√£o:**
   - Use **Zoom** (roda do mouse) para ver detalhes
   - Use **Pan** (arrastar com bot√£o central do mouse ou Espa√ßo+arrastar)
   - Pressione **Ctrl+Z** para desfazer √∫ltimo v√©rtice
   - Use **Snapping** (√≠m√£) para conectar geometrias: Projeto ‚Üí Op√ß√µes de Snapping

4. **Copiar atributos da camada de refer√™ncia:**
   - Abra a tabela de atributos da camada de pontos de refer√™ncia
   - Copie os valores (id, lote, rodovia, etc.)
   - Cole na fei√ß√£o que voc√™ est√° criando

---

## **Passo F: Salvar Edi√ß√µes**

1. **Salvar:**
   - Clique no √≠cone "Salvar Edi√ß√µes" (disco)
   - Ou pressione Ctrl+S

2. **Desativar edi√ß√£o:**
   - Clique novamente no √≠cone do l√°pis
   - Confirme salvar se solicitado

---

## **Passo G: Verificar Geometrias**

1. **Verifique visualmente:**
   - As geometrias devem aparecer sobre o mapa base
   - LineStrings devem seguir o tra√ßado da rodovia
   - Polygons devem cobrir as √°reas corretas

2. **Abra a tabela de atributos:**
   - Clique direito na camada ‚Üí Abrir Tabela de Atributos
   - Verifique se todos os campos est√£o preenchidos

---

## **Passo H: Prosseguir para Exporta√ß√£o**

Continue para [Exportar como GeoJSON]({{< relref "06.5-exportar-validar" >}}).

---

## **üìã Recursos √öteis**

- **Tutorial de Digitaliza√ß√£o QGIS:** [https://docs.qgis.org/latest/pt_BR/docs/user_manual/working_with_vector/editing_geometry_attributes.html](https://docs.qgis.org/latest/pt_BR/docs/user_manual/working_with_vector/editing_geometry_attributes.html)
- **V√≠deo tutorial (YouTube):** Busque "QGIS digitizing tutorial"
- **Atalhos de teclado:** F9 (alternar edi√ß√£o), Ctrl+. (adicionar feature), Ctrl+Z (desfazer)

---

**üìå Pr√≥ximo passo:**

‚û°Ô∏è [Exportar para GeoJSON e Validar]({{< relref "06.5-exportar-validar" >}})
