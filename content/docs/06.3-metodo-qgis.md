---
title: "6.3. Op√ß√£o 3: QGIS Desenho Manual"
weight: 63
bookToc: true
---

## **6.4.3 OP√á√ÉO 3: QGIS Desenho Manual (geometrias precisas)** üåü RECOMENDADO ARTESP

Use esta op√ß√£o quando voc√™ precisa desenhar geometrias **precisas** que seguem o tra√ßado da rodovia, ou quando precisa criar Polygons/LineStrings complexos.

**Quando usar:**
- ‚úÖ Precisa de LineString que segue o tra√ßado da rodovia
- ‚úÖ Precisa desenhar Polygons (√°reas de interven√ß√£o, SAU, estacionamentos)
- ‚úÖ Quer geometrias com precis√£o visual sobre mapa base
- ‚úÖ Tem tempo para desenhar manualmente cada geometria

**‚ö†Ô∏è Nota:** Este m√©todo √© mais demorado, mas produz geometrias mais precisas que MULTIPOINT ou LineStrings simples.

---

## **Passo A: Preparar Pontos de Refer√™ncia**

1. **Adicione colunas de refer√™ncia** (opcional, mas recomendado):
   - `lat_ref`, `lon_ref` - Coordenada aproximada para cada servi√ßo
   - Pode ser o ponto m√©dio do trecho, ou coordenada de km_inicial
   - Servir√° apenas para localizar o servi√ßo no mapa

2. **Exporte para CSV:**
   - Arquivo ‚Üí Salvar Como ‚Üí CSV UTF-8
   - Nome: `dados_referencia.csv`

---

## **Passo B: Importar Pontos de Refer√™ncia no QGIS**

1. **Abra o QGIS**

2. **Adicione os pontos de refer√™ncia:**
   - Menu: Camada ‚Üí Adicionar Camada ‚Üí **Adicionar Camada de Texto Delimitado**
   - Selecione `dados_referencia.csv`
   - Configure:
     - **Geometria**: Coordenadas de ponto
     - **Campo X**: `lon_ref`
     - **Campo Y**: `lat_ref`
     - **CRS**: EPSG:4674
   - Clique em "Adicionar"

3. **Os pontos aparecer√£o no mapa** para refer√™ncia visual

---

## **Passo C: Adicionar Mapa Base**

Para desenhar geometrias precisas, voc√™ precisa de um mapa base (sat√©lite ou ruas).

### **Op√ß√£o 1: Plugin QuickMapServices (Recomendado)**

1. **Instale o plugin:**
   - Menu: Plugins ‚Üí Gerenciar e Instalar Plugins
   - Busque: "QuickMapServices"
   - Clique em "Instalar Plugin"

2. **Adicione mapa base:**
   - Menu: Web ‚Üí QuickMapServices ‚Üí OSM ‚Üí **OSM Standard**
   - Ou: **Google Satellite** (se dispon√≠vel ap√≥s configurar "Get contributed pack")

### **Op√ß√£o 2: XYZ Tiles**

1. **Adicione camada XYZ:**
   - Painel Navegador ‚Üí XYZ Tiles ‚Üí clique direito ‚Üí New Connection
   - Nome: `Google Satellite`
   - URL: `https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}`
   - Clique OK

2. **Adicione ao mapa:**
   - Duplo clique em "Google Satellite" no painel Navegador

---

### **Passo C.3: Camadas de Rodovias OpenStreetMap (Opcional)**

A ARTESP disponibiliza no Portal de Dados Abertos camadas vetoriais das rodovias do Estado de S√£o Paulo **extra√≠das do OpenStreetMap (OSM)**. Estas camadas podem servir como refer√™ncia adicional para digitaliza√ß√£o.

**‚ö†Ô∏è IMPORTANTE - Limita√ß√µes e Responsabilidades:**

Os dados s√£o provenientes do OpenStreetMap (base colaborativa) e podem apresentar:
- **Inconsist√™ncias na acur√°cia posicional** - as geometrias podem n√£o corresponder exatamente ao tra√ßado real
- **Incompletude** - algumas rodovias ou trechos podem estar ausentes ou incompletos
- **Desatualiza√ß√£o** - os dados refletem o estado do OSM no momento da extra√ß√£o

**√â responsabilidade do usu√°rio verificar e validar** as informa√ß√µes antes de utiliz√°-las em produtos oficiais. Recomenda-se sempre conferir com imagens de sat√©lite atualizadas e/ou bases cartogr√°ficas oficiais.

---

**Vantagens de usar as camadas OSM:**
- ‚úÖ Refer√™ncia vetorial (facilita visualiza√ß√£o do tra√ßado)
- ‚úÖ Permite uso de snapping (ajuste magn√©tico) ao desenhar LineStrings
- ‚úÖ Cont√©m atributos OSM (nome da rodovia, tipo de via, etc.)
- ‚úÖ Dispon√≠vel em diferentes sistemas de coordenadas

**Camadas dispon√≠veis:**

| Arquivo | CRS | C√≥digo EPSG | Quando Usar |
|---------|-----|-------------|-------------|
| `sp_rodovias_sirgas2000_osm.geojson` | SIRGAS 2000 (geogr√°fico) | 4674 | **RECOMENDADO** - compat√≠vel com CRS de sa√≠da exigido |
| `sp_rodovias_utm_22s_osm.geojson` | UTM Zona 22S | 31982 | Regi√£o oeste de SP - √∫til para medi√ß√µes em metros |
| `sp_rodovias_utm_23s_osm.geojson` | UTM Zona 23S | 31983 | Regi√£o leste de SP - √∫til para medi√ß√µes em metros |
| `sp_rodovias_utm_22s_23s_osm.geojson` | UTM Zonas 22S e 23S | Misto | Projetos estaduais - sistema m√©trico |

**Como adicionar:**

1. **Fa√ßa download das camadas:**
   - Acesse: [Portal de Dados Abertos ARTESP - Programa√ß√£o de Obras](https://dadosabertos.artesp.sp.gov.br/dataset/programacao-de-obras)
   - Baixe o arquivo desejado (recomendamos `sp_rodovias_sirgas2000_osm.geojson`)
   - **Formato:** GeoJSON (arquivos menores, mais f√°cil de distribuir no portal)

2. **(Opcional, mas Recomendado) Converter para GeoPackage:**

   Embora os arquivos sejam distribu√≠dos em GeoJSON, **GeoPackage √© muito mais eficiente para trabalhar no QGIS** (5-10x mais r√°pido em renderiza√ß√£o e opera√ß√µes espaciais).

   **Op√ß√£o A - Interface QGIS:**
   - Arraste o arquivo `.geojson` para o mapa do QGIS
   - Clique direito na camada ‚Üí **Exportar** ‚Üí **Salvar Fei√ß√µes Como...**
   - Configure:
     - **Formato**: GeoPackage
     - **Nome do arquivo**: `sp_rodovias_sirgas2000_osm.gpkg`
     - **SRC**: Manter o original (EPSG:4674, 31982 ou 31983)
     - **√çndice espacial**: ‚úÖ Marcar esta op√ß√£o (importante!)
   - Clique **OK**
   - Remova a camada GeoJSON e adicione a GeoPackage criada
   - (Opcional) Delete o arquivo `.geojson` para economizar espa√ßo

   **Op√ß√£o B - Linha de Comando (ogr2ogr):**
   ```bash
   ogr2ogr -f GPKG -lco SPATIAL_INDEX=YES \
       sp_rodovias_sirgas2000_osm.gpkg \
       sp_rodovias_sirgas2000_osm.geojson
   ```

   üí° **Benef√≠cio:** Zoom e pan muito mais suaves, especialmente para a malha rodovi√°ria completa do estado (arquivos grandes). Compensa o espa√ßo extra em disco (~2x maior).

   **Compara√ß√£o r√°pida:**
   - GeoJSON: ~20 MB, renderiza√ß√£o mais lenta
   - GeoPackage: ~40 MB, renderiza√ß√£o 5-10x mais r√°pida

3. **Adicione no QGIS:**
   - Menu: Camada ‚Üí Adicionar Camada ‚Üí **Adicionar Camada Vetorial**
   - Selecione o arquivo baixado (`.geojson` ou `.gpkg` se voc√™ converteu)
   - Clique em "Adicionar"

4. **Configure a simbologia (opcional):**
   - Clique direito na camada ‚Üí Propriedades ‚Üí Simbologia
   - Escolha cor e espessura de linha que facilite a visualiza√ß√£o sobre o mapa base

5. **Use para refer√™ncia e snapping:**
   - As rodovias aparecer√£o como linhas vetoriais sobre o mapa
   - Voc√™ pode ativar o snapping (Projeto ‚Üí Op√ß√µes de Snapping) para que seus desenhos "colem" nas geometrias de refer√™ncia
   - Use como guia visual ao desenhar LineStrings e Polygons

üí° **Dica:** Mesmo usando as camadas OSM como refer√™ncia, sempre **confira visualmente** com imagens de sat√©lite recentes para garantir a precis√£o do seu trabalho.

üìò **Para especifica√ß√µes t√©cnicas detalhadas**, consulte [Anexo 14.2 - Camadas de Refer√™ncia OSM]({{< relref "14-anexos#142-camadas-de-refer√™ncia-rodovias-openstreetmap" >}}).

---

## **Passo D: Criar Camada de Geometrias**

1. **Crie nova camada:**
   - Menu: Camada ‚Üí Criar Camada ‚Üí **Nova Camada GeoPackage** (ou Shapefile)
   - Configure:
     - **Nome do banco de dados**: `conservacao_2026.gpkg` (escolha local para salvar)
     - **Nome da tabela**: `servicos`
     - **Tipo de geometria**: Escolha conforme necessidade:
       - **Point**: servi√ßos pontuais
       - **LineString**: servi√ßos lineares (pavimento, sinaliza√ß√£o, etc.)
       - **Polygon**: √°reas (SAU, estacionamento, √°reas de interven√ß√£o)
       - **MultiPoint**: m√∫ltiplos pontos discretos
     - **CRS**: EPSG:4674 - SIRGAS 2000

---

**‚ö†Ô∏è IMPORTANTE - Servi√ßos com Diferentes Tipos de Geometria**

Se seus servi√ßos incluem **DIFERENTES tipos de geometria** (exemplo: Point para equipamentos + LineString para pavimenta√ß√£o + Polygon para √°reas), voc√™ precisar√°:

1. **Criar M√öLTIPLAS camadas** no QGIS (uma para cada tipo de geometria)
   - Cada camada GeoPackage/Shapefile suporta apenas UM tipo de geometria
   - Exemplo: `servicos_points.gpkg`, `servicos_lines.gpkg`, `servicos_polygons.gpkg`

2. **Exportar M√öLTIPLOS arquivos GeoJSON** (um por camada)
   - Cada exporta√ß√£o gerar√° um arquivo separado

3. **Combinar os arquivos** em um √∫nico GeoJSON posteriormente
   - O schema exige UM √öNICO arquivo final com TODAS as features
   - Use o script `mesclar_geojson.py` fornecido

üìò **Para instru√ß√µes completas sobre mesclagem**, consulte [Se√ß√£o 6.5.A - M√∫ltiplas Camadas]({{< relref "06.5-exportar-validar#a-tratamento-de-m√∫ltiplas-camadas-com-geometrias-diferentes" >}}).

üí° **Dica:** Organize os nomes das camadas com sufixos claros (_points, _lines, _polygons) para facilitar a identifica√ß√£o durante a exporta√ß√£o.

---

2. **Adicione campos de atributos:**
   - Clique em "Novos campos" e adicione os campos do schema:
     - `id` (Texto, tamanho 50)
     - `lote` (Texto, tamanho 10)
     - `rodovia` (Texto, tamanho 20)
     - `item` (Texto, tamanho 10)
     - `detalhamento_servico` (Texto, tamanho 255)
     - `unidade` (Texto, tamanho 10)
     - `quantidade` (N√∫mero decimal)
     - `km_inicial` (N√∫mero decimal)
     - `km_final` (N√∫mero decimal)
     - `data_inicial` (Data)
     - `data_final` (Data)
     - `observacoes_gerais` (Texto, tamanho 255)
   - Clique OK

---

## **Passo E: Desenhar Geometrias**

1. **Ative o modo de edi√ß√£o:**
   - Selecione a camada criada
   - Clique no √≠cone do l√°pis (ou F9) para **Alternar Edi√ß√£o**

2. **Ferramentas de desenho:**

   ### **Para POINT:**
   - Clique no √≠cone "Adicionar Fei√ß√£o de Ponto"
   - Clique no local do servi√ßo no mapa
   - Preencha os atributos na janela que aparece
   - Clique OK

   ### **Para LineString:**
   - Clique no √≠cone "Adicionar Fei√ß√£o de Linha"
   - Clique sucessivamente ao longo da rodovia para criar v√©rtices
   - **Siga o tra√ßado da rodovia** usando o mapa base como guia
   - Clique direito para finalizar a linha
   - Preencha os atributos
   - Clique OK

   ### **Para Polygon:**
   - Clique no √≠cone "Adicionar Fei√ß√£o de Pol√≠gono"
   - Clique nos v√©rtices ao redor da √°rea
   - Feche o pol√≠gono clicando direito
   - Preencha os atributos
   - Clique OK

3. **Dicas de digitaliza√ß√£o:**
   - Use **Zoom** (roda do mouse) para ver detalhes
   - Use **Pan** (arrastar com bot√£o central do mouse ou Espa√ßo+arrastar)
   - Pressione **Ctrl+Z** para desfazer √∫ltimo v√©rtice
   - Use **Snapping** (√≠m√£) para conectar geometrias: Projeto ‚Üí Op√ß√µes de Snapping

4. **Copiar atributos da camada de refer√™ncia:**
   - Abra a tabela de atributos da camada de pontos de refer√™ncia
   - Copie os valores (id, lote, rodovia, etc.)
   - Cole na fei√ß√£o que voc√™ est√° criando

---

## **Passo F: Salvar Edi√ß√µes**

1. **Salvar:**
   - Clique no √≠cone "Salvar Edi√ß√µes" (disco)
   - Ou pressione Ctrl+S

2. **Desativar edi√ß√£o:**
   - Clique novamente no √≠cone do l√°pis
   - Confirme salvar se solicitado

---

## **Passo G: Verificar Geometrias**

1. **Verifique visualmente:**
   - As geometrias devem aparecer sobre o mapa base
   - LineStrings devem seguir o tra√ßado da rodovia
   - Polygons devem cobrir as √°reas corretas

2. **Abra a tabela de atributos:**
   - Clique direito na camada ‚Üí Abrir Tabela de Atributos
   - Verifique se todos os campos est√£o preenchidos

---

## **Passo H: Prosseguir para Exporta√ß√£o**

Continue para [Exportar como GeoJSON]({{< relref "06.5-exportar-validar" >}}).

---

## **üìã Recursos √öteis**

- **Tutorial de Digitaliza√ß√£o QGIS:** [https://docs.qgis.org/latest/pt_BR/docs/user_manual/working_with_vector/editing_geometry_attributes.html](https://docs.qgis.org/latest/pt_BR/docs/user_manual/working_with_vector/editing_geometry_attributes.html)
- **V√≠deo tutorial (YouTube):** Busque "QGIS digitizing tutorial"
- **Atalhos de teclado:** F9 (alternar edi√ß√£o), Ctrl+. (adicionar feature), Ctrl+Z (desfazer)

---

**üìå Pr√≥ximo passo:**

‚û°Ô∏è [Exportar para GeoJSON e Validar]({{< relref "06.5-exportar-validar" >}})
